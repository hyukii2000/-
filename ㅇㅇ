# 비디오 스트리밍 함수
def video_stream():
    # picamera 초기화
    camera = picamera.PiCamera()
    camera.resolution = (640, 480)
    camera.framerate = 30
    
    # 비디오 스트리밍 시작
    stream = io.BytesIO()
    for _ in camera.capture_continuous(stream, format='jpeg', use_video_port=True):
        # 스트림 데이터 읽기
        frame = stream.getvalue()
        
        # 프레임 처리
        frame = imutils.rotate(frame, angle=90)
        
        # VLC 플레이어에 프레임 전송
        subprocess.Popen(vlc_cmd, stdin=subprocess.PIPE).stdin.write(frame)
        
        # 스트림 초기화
        stream.seek(0)
        stream.truncate()

        # 1초 대기
        time.sleep(1)

# 비디오 스트리밍 시작
if __name__ == '__main__':
    video_stream()
